<div class="container">
  <div
    class="movie-container"
    *ngIf="movie$ | async as movie; else loading">
    <div
      *ngIf="movie.backdrop_path"
      class="overflow"
      style="background-image: url({{backdropUrl}}{{movie.backdrop_path}})"
    ></div>
    <div class="movie-info" [@movie]="">
      <div class="movie-header">
        <a
          class="back-home-btn"
          (click)="onBackBtnClick()"
        ></a>
        <h3 class="movie-title">{{movie.title}}</h3>
        <div class="rating">
          <img src="../../../assets/images/star.png">
          <span>{{movie.vote_average}}</span>
        </div>
      </div>
      <div class="movie-poster">
        <img
          class="movie-backdrop-img"
          src="{{movie.backdrop_path ? backdropUrl + movie.backdrop_path : '../assets/images/no-backdrop.jpg'}}">
        <div
          class="movie-tagline"
          *ngIf="movie.tagline"
        >"{{movie.tagline}}"</div>
      </div>
      <div class="movie-details">
        <table class="movie-main-info">
          <tr>
            <td>Genre:</td>
            <td>{{movie.genres | genresList}}</td>
          </tr>
          <tr>
            <td>Runtime:</td>
            <td>{{movie.runtime ? movie.runtime : 0}} min</td>
          </tr>
          <tr>
            <td>Release date:</td>
            <td>{{movie.release_date | date: 'dd MMMM yyyy'}}</td>
          </tr>
          <tr>
            <td>Country:</td>
            <td>{{movie.production_countries | countryList}}</td>
          </tr>
          <tr>
            <td>Budget:</td>
            <td>{{movie.budget | moneyFormatter}}$</td>
          </tr>
          <tr>
            <td>Revenue:</td>
            <td>{{movie.revenue | moneyFormatter}}$</td>
          </tr>
          <tr>
            <td>Cast:</td>
            <td><a class="cast-link" target="_blank" href="https://www.themoviedb.org/movie/{{movie.id}}/cast">Full Cast</a></td>
          </tr>
        </table>
        <div
          class="overview"
          *ngIf="movie.overview">
          {{movie.overview}}
        </div>
        <app-trailers [trailers]="movie.videos.results"></app-trailers>
      </div>
      </div>
  </div>
</div>

<ng-template #loading>
  <div class="loader-container">
    <div class="loader">Loading...</div>
  </div>
</ng-template>
